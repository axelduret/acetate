(self.webpackChunk=self.webpackChunk||[]).push([[633],{5633:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});const a={props:{Id:String,Avatar:String},data:function(){return{avatarDialog:!1,currentAvatar:null,event:"",file:"",appURL:"http://127.0.0.1:8001",baseURL:"/",apiToken:localStorage.getItem("user_api_token"),errors:!1}},mounted:function(){this.currentAvatar=this.appURL+this.baseURL+"storage/avatar/event/"+this.Avatar},methods:{handleFileUpload:function(){"image/jpeg"!==this.$refs.file.files[0].type&&"image/gif"!==this.$refs.file.files[0].type&&"image/png"!==this.$refs.file.files[0].type?this.errors="Invalid file type ( gif, jpg or png ).":(this.errors=!1,this.file=this.$refs.file.files[0],this.filePreview=this.$refs.file.files[0],this.currentAvatar=URL.createObjectURL(this.filePreview))},submit:function(){if(!this.errors){var t=new FormData,e=this.file.slice(0,this.file.size,this.file.type),i=this.file.name.substr(0,30),a=new File([e],i,{type:this.file.type});t.append("upload",a);var s={headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2),Authorization:"Bearer "+this.apiToken}};axios.post(this.baseURL+"api/events/"+this.Id+"/avatar",t,s).then(function(t){this.refreshAll(),this.closeDialog()}.bind(this)).catch((function(t){console.log(t)}))}},fetchAPI:function(){var t=this;axios.request({url:this.Id,method:"get",baseURL:this.baseURL+"api/events/",headers:{Authorization:"Bearer "+this.apiToken}}).then((function(e){console.log("response"),t.event=e.data.data.event})).catch((function(t){console.log(t)})).finally((function(){}))},refreshAll:function(){this.$emit("refreshAvatar"),this.$emit("refreshToolbox")},closeDialog:function(){this.errors=!1,this.avatarDialog=!1,this.$emit("refreshToolbox")}}};const s=(0,i(1900).Z)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-dialog",{attrs:{width:"500"},model:{value:t.avatarDialog,callback:function(e){t.avatarDialog=e},expression:"avatarDialog"}},[i("form",{attrs:{id:"myForm"},on:{submit:function(t){t.preventDefault()}}},[i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"800px"}},[i("v-card-title",{staticClass:"title greybg primary--text"},[i("div",[t._v(t._s(t.$t("admin.edit_avatar.title")))])]),t._v(" "),i("v-card-text",[i("v-card",{staticClass:"mt-4 col-auto mx-auto my-auto",class:(t.$vuetify.theme.dark,"greybg"),attrs:{elevation:"-1",width:"300"}},[t.errors?i("div",{staticClass:"error mb-2 px-4 white--text py-2 rounded"},[t._v("\n              "+t._s(t.errors)+"\n            ")]):t._e(),t._v(" "),i("v-card-text",{staticClass:"white"},[i("img",{staticClass:"mx-4 my-3 primary--text col-auto mx-auto my-auto",attrs:{width:"213",src:t.currentAvatar}}),t._v(" "),i("v-spacer"),i("input",{ref:"file",staticClass:"mx-4 my-4 primary--text",attrs:{type:"file",id:"file"},on:{change:function(e){return t.handleFileUpload()}}})],1)],1)],1),t._v(" "),i("v-divider",{staticClass:"mt-2"}),t._v(" "),i("v-card-actions",[i("v-btn",{staticClass:"primary--text",attrs:{text:""},on:{click:function(e){return t.closeDialog()}}},[t._v("cancel")]),t._v(" "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{text:"",color:"info",type:"submit"},on:{click:function(e){return t.submit()}}},[t._v("\n            submit\n          ")])],1)],1)],1)])],1)}),[],!1,null,null,null).exports}}]);