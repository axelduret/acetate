(self.webpackChunk=self.webpackChunk||[]).push([[335],{4335:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>r});const i={props:{Id:String,Avatar:String},data:function(){return{avatarDialog:!1,currentAvatar:null,event:"",file:"",appURL:"http://unitysound.ch/acetate",baseURL:"/",apiToken:localStorage.getItem("user_api_token"),errors:!1}},mounted:function(){this.Avatar?this.currentAvatar=this.appURL+this.baseURL+"storage/avatar/event/"+this.Avatar:this.currentAvatar=null},methods:{handleFileUpload:function(){"image/jpeg"!==this.$refs.file.files[0].type&&"image/gif"!==this.$refs.file.files[0].type&&"image/png"!==this.$refs.file.files[0].type?this.errors="Invalid file type ( gif, jpg or png ).":(this.errors=!1,this.file=this.$refs.file.files[0],this.filePreview=this.$refs.file.files[0],this.currentAvatar=URL.createObjectURL(this.filePreview))},submit:function(){if(!this.errors){var t=new FormData,e=this.file.slice(0,this.file.size,this.file.type),a=this.file.name.substr(0,30),i=new File([e],a,{type:this.file.type});t.append("upload",i);var r={headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2),Authorization:"Bearer "+this.apiToken}};axios.post(this.baseURL+"api/events/"+this.Id+"/avatar",t,r).then(function(t){this.refreshAll(),this.closeDialog()}.bind(this)).catch((function(t){console.log(t)}))}},deleteAvatar:function(){var t=new FormData;t.append("upload","");var e={headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2),Authorization:"Bearer "+this.apiToken}};axios.post(this.baseURL+"api/events/"+this.Id+"/avatar",t,e).then(function(t){this.currentAvatar=null,this.refreshAll(),this.closeDialog()}.bind(this)).catch((function(t){console.log(t)}))},fetchAPI:function(){var t=this;axios.request({url:this.Id,method:"get",baseURL:this.baseURL+"api/events/",headers:{Authorization:"Bearer "+this.apiToken}}).then((function(e){console.log("response"),t.event=e.data.data.event})).catch((function(t){console.log(t)})).finally((function(){}))},refreshAll:function(){this.$emit("refreshAvatar"),this.$emit("refreshToolbox")},closeDialog:function(){this.errors=!1,this.avatarDialog=!1,this.refreshAll()}}};const r=(0,a(1900).Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:t.avatarDialog,callback:function(e){t.avatarDialog=e},expression:"avatarDialog"}},[a("form",{attrs:{id:"myForm"},on:{submit:function(t){t.preventDefault()}}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"800px"}},[a("v-card-title",{staticClass:"title greybg primary--text"},[a("div",[t._v(t._s(t.$t("admin.edit_avatar.title")))])]),t._v(" "),a("v-card-text",[a("v-card",{staticClass:"mt-4 col-auto mx-auto my-auto",class:(t.$vuetify.theme.dark,"greybg"),attrs:{elevation:"0",width:"300"}},[t.errors?a("div",{staticClass:"error mb-2 px-4 white--text py-2 rounded"},[t._v("\n                            "+t._s(t.errors)+"\n                        ")]):t._e(),t._v(" "),a("v-card-text",{staticClass:"white"},[t.currentAvatar?a("img",{staticClass:"mx-4 my-3 primary--text col-auto mx-auto my-auto",attrs:{width:"213",src:t.currentAvatar}}):t._e(),t._v(" "),a("v-spacer"),a("input",{ref:"file",staticClass:"mx-4 my-4 primary--text",attrs:{type:"file",id:"file"},on:{change:function(e){return t.handleFileUpload()}}})],1)],1)],1),t._v(" "),a("v-divider",{staticClass:"mt-2"}),t._v(" "),a("v-card-actions",[a("v-btn",{staticClass:"primary--text",attrs:{text:""},on:{click:function(e){return t.closeDialog()}}},[t._v(t._s(t.$t("button.cancel")))]),t._v(" "),a("v-spacer"),t._v(" "),t.currentAvatar?a("v-btn",{attrs:{text:"",color:"warning",type:"submit"},on:{click:function(e){return t.deleteAvatar()}}},[t._v("\n                        "+t._s(t.$t("button.delete"))+"\n                    ")]):t._e(),t._v(" "),t.currentAvatar?a("v-btn",{attrs:{text:"",color:"info",type:"submit"},on:{click:function(e){return t.submit()}}},[t._v("\n                        "+t._s(t.$t("button.submit"))+"\n                    ")]):t._e()],1)],1)],1)])],1)}),[],!1,null,null,null).exports}}]);